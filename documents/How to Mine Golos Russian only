#
Как майнить ГОЛОС
Пошаговая инструкция для запуска майнинга.

В этой инстукции предполагается наличие развернутой функционирующей сети. О запуске тестовой сети можно ознакомиться в файле «Как запустить тестовую сеть».

Майнинг требует эксплуатации полной ноды (узла) и наличия ПО для разработки Голоса. Для установки ПО следует ознакомиться с файлом «Как разрабатывать Голос».

Настройка ноды свидетеля (майнера)
Нода свидетеля – это любой полный узел, который обрабатывает и проверяет блоки. Он в реальном времени следит за тем, как строится блокчейн. Это необходимое условие для производства блоков. Вначале требуется произвести синхронизацию с существующей сетью и разрешить на ноде свидетеля создание папки datadir, которая содержит файл конфигурации:

cd programs/witness_node
./witness_node -d datadir 


Измените следующий файл datadir / config.ini и обновить следующие строки для настройки ноды свидетеля на производство блоков.

# Количество потоков, используемых для доказательства работы
mining-threads = 4

# Имя ноды свидетеля, контролируемой этим узлом (например, initwitness)
miner = ["your-account-name", "<PrivateKey-WIF>"]
witness = "your-account-name"


Производство блока требует наличия приватного ключа, связанного с видом управления «активный участник». Учетные записи майнинга могут иметь только один набор ключей, соотвествуюший «активному участнику».

Запустите ноду свидетеля
После настройки своей ноды свидетеля, просто запустите ее, и она подключится к сети. Если это тестовая сеть, то вам, возможно, потребуется указать узел сида.

./witness_node -d datadir
При удачном запуске майнинга, появится данное сообщение:

405992ms th_a       database.cpp:863              update_witness_sched ] scheduling miner <miner-name>


Оно означает, что сеть включила ваше майнинговое утройство в очередь на майнинг на ближайшее время. Убедитесь, что ваша нода свидетеля работает все это время, иначе генерация блока будет невозвожно. При успешном производстве блока вы увидите следующее сообщение :

Generated block #645 with timestamp 2016-03-18T14:08:40 at time 2016-03-18T14:08:40 by <miner-name>


Максимизация эффективности майнинга
Для достижения наилучших результатов майнинга критичным является низким уровнем задержки при подключении к сети. У ноды свидетеля имеется менее 3 секунд для того, чтобы проделать работу и передать результат следующему в очереди узлу для включения в блок. Чем раньше ваш узел получает блок, тем выше вероятность того, что проделанная вами работа будет получена следующим узлом.

Производство блоков
После того, как ваше доказательство работы акцептируется сетью крайне важно, чтобы ваша нода оставалась подключенной, чтобы было возможно производство блока в запланированное для вас время. В каждом раунде (21 блок) один майнер получает право на производство блока. Рауд может занять по меньшей мере 63 секунды, если каждый майнер производит блок. Длина очереди из майнеров пропорциональна сложности. Уровень сложности удваивается каждый раз при добавлении 4 новых майнеров в очередь. Это означает, что с момента когда вы представите доказательство работы до момента, когда получите право произвести блок, пройдет чуть меньше нескольких часов.

Если ваш узел не производит блок в назначенное время, то вы не получаете вознаграждение.

Ключ безопасности
По активному ключу (например, ключу майнинга) возможен доступ к средствам на учетной записи и, соответственно, кража такого ключа приведет к потере средств. Примите во внимание данный риск и обеспечьте регулярное перемещение средств с активной на другую более безопасную учетную запись. 

Сохраняйте ключ владельца офлайн
Доходы от майнинга зачисляются на ваш счет в виде отложенных ГОЛОСОВ. Перевод отложенных ГОЛОСОВ в ГОЛОСА занимает 104 недели. Если ваш ключ владельца хранится офлайн, то вы получите 1 недельное уведомление о взломе вашего активного ключа, до того момента, когда 1% ваших отложенных ГОЛОСОВ будут переведены в ГОЛОСА и сняты со счета. Если вы обнаружили несанкционированные действия, то вы можете использовать свой ключ владельца, чтобы изменить активный ключ до момента перевода средств.

Конфигурация прав доступа к файлам

Майнинг требует доступа к ключу «активного участника». Для больше безопасности файл конфигурации для ноды свидетеля должен быть настроен таким образом, чтобы только учетная запись, привязанная к майнингу, имела доступ к config.ini. В UNIX-подобных системах права доступа должны быть 600 (-rw------). Несмотря на то, что приватный ключ можно передать в командной строке, эта информация будет доступна любому пользователю системы.

Майнинг с нескольких компьютеров
При наличии более, чем одного компьютера для майнинга, очень важно настроить как ноду свидетеля только один из них. Для настройки steemd процесса в качестве ноды свидетеля (а не майнера) вам потребуются следующие параметры конфигурации:

# WIF Private Key of a witness, starts with a 5...
witness = "your-account-name"
private-key = <PrivateKey-WIF>


Вы не должны заводить ноду свидетеля с той же учетной записью, your-account-name, на более чем одну систему steemd. Если это произойдет, то обе системы steemd произведут блок одновременно. Другие узлы сети увидят это двойное подписание и представят доказательство в сеть, что позволит им претендовать на остаток средств на вашей учетной записи.

